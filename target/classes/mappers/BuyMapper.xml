<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BuyDAO">

<!-- 상품내역 검색 -->
 <select id="goodsCartList" parameterType="BuyVO" resultType="BuyVO">
	select  c.c_Cnt c_Cnt, g.g_Name g_Name, g.g_Price g_Price
	from cart c left outer join goods g 
    on c.g_Id = g.g_Id
	where m_Id = #{m_Id}
	order by rownum DESC
</select>

<!-- 고객정보 검색 -->
 <select id="memberCartInfo" parameterType="BuyVO" resultType="BuyVO">
	SELECT  m_name, m_email, m_tell, m_num, m_addr, m_subaddr
	FROM member 
	where m_Id = #{m_Id}
</select> 

<!-- 결제시 구매목록에 담기 -->
	<insert id="addBuy" parameterType="BuyVO">
	
		insert into buy(b_Id, g_Id, m_Id, c_cnt, b_date, b_total)
		values(seq_b_Id.nextval, #{g_Id}, #{m_Id}, #{c_Cnt}, sysdate, #{totalPrice})
	
	</insert>

</mapper>